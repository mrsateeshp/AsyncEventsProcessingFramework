import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage

dependencies{
    implementation "io.kamon:kamon-core_$scala_major_version"
    implementation "io.kamon:kamon-prometheus_$scala_major_version"
    implementation 'org.slf4j:slf4j-simple'
    implementation 'junit:junit' //FIXME:
}

apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'com.bmuschko.docker-remote-api'

jar {
    manifest {
        attributes "Main-Class": "com.thoughtstream.aepf.AsyncEventsProcessorTest"
    }
}

jar.dependsOn('shadowJar')

task buildImage(type: DockerBuildImage){
    dependsOn build
    inputDir = project.file('Dockerfile').parentFile
    tags.add('mrsateeshp/' + project.name + ':' + version)
}
